<!DOCTYPE html>
<!-- Note2self1 !DOCTYPE html skal altid være der i starten - Efterfulgt af hmtl, som skal omringe hele hmtl koden -->
<html>
<!-- Note2self2 Hmtl delen skal for oven og forneden for at afslutte hmtl koden -->
<head>
	<!-- Husk at title er uden dobbelt t og at det ikke er et tomt tag-->
	<title> Musik Json</title>
    <link href="styles.css" rel="stylesheet">
</head>
<body class="primgraynblue"> 
  <!---  <div class="navbar">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="wow.html">WoW</a></li>
            <li><a href="JS.html">Intro til JS</a></li>
            <li><a href="Musik-Arkiv.html">Musik Opgaven</a></li>
            <li><a href="Musik-Arkiv via div.html">Musik Opgaven uden Tabel </a></li>
        </ul>
    </div>
-->
    <h1> Musik Arkiv - Mine top 5 af album fra json filen </h1>

    <p style="color: #fffa1e;"> Her er de albums jeg syntes var bedst ud fra listen, de er <span style="color: red;text-underline-position: below;"> ikke </span> rangeret 
		    <br> Jeg har selv fundet album coverene online, og sat dem ind i Json filen, så de kunne trækkes ind i samme tabel
</p>
    <table>
        <thead>
            <tr style="color: #5bfe60;">
                <th>JSON Album ID</th>
				<th>Albumcover</th>
                <th>Album Navn</th>
                <th>Kunstner Name</th>
                <th>Udgivelses År</th>
                <th>Mængde af numre</th>
                <th>Total løbetid</th>
            </tr>
        </thead>
        <tbody id="albumTable">
        </tbody>
    </table>

	<!-- Du forstår ikke hvor lang tid jeg har brugt for at få det her til at fungere, og især fordi jeg ikke kunne finde en forklaring til cors fejlen som jeg fik overalt-->

    <script>
        function calculateTotalRuntime(trackList) {
            const totalSeconds = trackList.reduce((total, track) => total + track.trackTimeInSeconds, 0);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes}m ${seconds}s`;
        }   

        document.addEventListener("DOMContentLoaded", function () {
            fetch("albums.json")
                .then(response => response.json())
                .then(data => {
                    const albumIds = [2, 3, 4, 5, 9]; /* Her vælger jeg de albums som jeg gerne vil have vidst i tabellen */
                    const albumTable = document.getElementById("albumTable");
                    let totalTracks = 0;
                    let totalRuntime = 0;

                    albumIds.forEach(id => {
                        const album = data.find(item => item.id === id);

                        if (album) {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td style="text-align: center">${album.id}</td>
								<td><img src="${album.albumCover}" alt="${album.albumName}" width="150" height="150"></td>
                                <td style="text-align: center">${album.albumName}</td>
                                <td style="text-align: center">${album.artistName}</td>
                                <td style="text-align: center">${album.productionYear}</td>
                                <td style="text-align: center">${album.trackList.length}</td>
                                <td style="text-align: center">${calculateTotalRuntime(album.trackList)}</td>
                            `;
                            albumTable.appendChild(row);

                            totalTracks += album.trackList.length;
                            totalRuntime += calculateTotalRuntime(album.trackList);
                        }
                    });
                })
                .catch(error => console.error("Error fetching data:", error));
        });
    </script>
</body>
</html>